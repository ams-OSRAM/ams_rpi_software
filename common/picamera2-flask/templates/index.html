{% from "_formhelpers.html" import render_field %}
<html>

<head>
  <link rel="stylesheet" href='/static/style.css' />
<link rel="shortcut icon" href="{{ url_for('static', filename='ams.ico') }}">
  <title>mira web</title>
</head>

<body>
  <img src="static/Ams-Osram_Logo.svg" alt="osramlogo" />


  <!-- <input type="submit" name="download" value="Download">
<input type="submit" name="watch" value="Watch">
<input type="submit" name="watch" value="Watch">
<input type="text" id="fname" name="fname"> -->
  <h1>Web interface for {{ (model) }} evaluation</h1>
  
  <p>Change sensor model: <a href="{{ url_for('admin') }}">admin panel!</a></p>
  <form method=post>

  <div class="row">
    <div class="column" style="background-color:transparent;">
      <div class="subrow">

        <h2>Image Sensor Controls</h2>
          <dl>
            {{ render_field(form.exposure_us) }}
            {{ render_field(form.illumination) }}
            {{ render_field(form.analog_gain) }}
            {{ render_field(form.mode) }}

            {{ render_field(form.apply) }}

      </div>

      <div class="subrow">

        <h2>Image Capture</h2>

        {{ render_field(form.amount) }}

        {{ render_field(form.download_option) }}

        {{ render_field(form.download) }}
      </div>

      </dl>
      <!-- <p><input type=submit value=Apply> -->

    </div>
    <div class="column" style="background-color:transparent;">
      <div class="subrow">
        <h2>Video feed</h2>
	<h4>Close the camera to avoid conflicts with other applications such as libcamera-apps</h4>
            {{ render_field(form.cam_open) }}
            {{ render_field(form.cam_close) }}
        <img src="/video_feed" height="400" />
        <h2>Info</h2>
        properties
        </br>

        {{ (caminfo) }}


      </div>

    </div>

  </div>
  </form>
  
  <br>

  You can also write scripts for automated image capture, register access...
  <a href = "{{ notebook }}" target="_blank">Jupyter Lab for scripting and automated capture</a>
  </p>
  
  <p>
  If you don't see the video, probably another application accessing the camera, or the cable is not connected. See the logs below.

  </p>
  <p>Changelog and version: <a href="{{ url_for('changelog') }}">changelog!</a></p>
  keep in mind this is website is still in experimental stage.
  <br>
  <a href="mailto: philippe.baetens@ams-osram.com">technical support</a>
  <br>

</body>

</html>
